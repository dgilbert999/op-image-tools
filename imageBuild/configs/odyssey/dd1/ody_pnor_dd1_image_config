#!/usr/bin/env python3
# this is not a python executable, rather the first line is a hint for text editors
# IBM_PROLOG_BEGIN_TAG
# This is an automatically generated prolog.
#
# $Source: public/common/utils/imageProcs/tools/configs/ody_pnor_dd1_image_config.py $
#
# IBM CONFIDENTIAL
#
# EKB Project
#
# COPYRIGHT 2022
# [+] International Business Machines Corp.
#
#
# The source code for this program is not published or otherwise
# divested of its trade secrets, irrespective of what has been
# deposited with the U.S. Copyright Office.
#
# IBM_PROLOG_END_TAG

{
    # ekbRoot can be overridden by passing repo path into imageBuild.py using --ekb
    'ekbRoot'   : '~/sandbox/p11/ekb-src',
    # ekbCommit only matters if --build option is used on imageBuild.py
    'ekbCommit' : 'main',

    # sbeRoot can be overridden by passing repo path into imageBuild.py using --sbe
    'sbeRoot'   : '~/sandbox/p11/sbe',
    # sbeCommit only matters if --build option is used on imageBuild.py
    'sbeCommit' : 'main',

    # Definition of sections
    'image_sections' : {
        # output pak name
        'boot' : {
            # Location of archive(s) needed to build this section. Muliple archives are merged
            'archives' : ['%sbeRoot%/builddir/public/src/onetime/odyssey/bldr/odyssey_bldr_DD1.pak'],

            # 'files' is a list of essential archive entries (files). Intended to generate
            # place holders for content that may not yet exist in the archives that
            # make up this section.
            # They are generated with zero data length if content location doesn't exist.
            # storage method is 'store' (no compression)
            # (EntryName, content location), ...
            'files' : [('part.tbl','%gen%/part.tbl')],

            # Size of the partion in the generated image - padded if needed
            'partition_size' : 0x20000,
            # Generate a hash list called hash.list and add it to this image section and run signimage tool
            'hashlist' : 'hash.list',
            # location (subdir) in PAK file for hash and sign files.
            'hashpath' : 'boot',
        },
        'runtime' : {
            # Location of archive(s) needed to build this section. Muliples are merged.
            'archives' : ['%sbeRoot%/builddir/public/src/runtime/odyssey/sppe/odyssey_sppe_DD1.pak',
                          '%ekbImageDir%/pak/odyssey/10/odyssey.10.sppe.ram.pak'],

            'partition_size' : 0xC0000,
            # Generate a hash list called hash.list and add it to this image section and run signimage tool
            'hashlist' : 'hash.list',
            # location (dir) inside PAK file for hash and sign files
            'hashpath' : 'rt',
            'noHash'   : ['Info.txt'],
        },
        'bmc' : {
            # Location of archive(s) needed to build this section
            'archives' : ['defaults/bmc.pak'],

            # 'files' is a list of essential archive entries (files). Intended to generate
            # place holders for content that may not yet exist in the archives that
            # make up this section.
            # They are generated with zero data length if content file doesn't exist.
            # storage method is 'store' (no compression)
            # (EntryName, content location), ...
            'files' : [('bmc/attr.ovrd','EMPTY'),
                       ('bmc/image.hash','EMPTY'),],

            'partition_size' : 0x8000,
            # not signed - don't provide hashlist
            'noHash' : ['bmc/Info.txt'],
        },
        'hostboot' : {
            # Location of archive(s) needed to build this section
            'archives' : ['defaults/host.pak'],

            'files' : [('host/attr.ovrd','EMPTY'),
                       ('host/image.hash','EMPTY'),],

            'partition_size' : 0x8000,
            # not signed - don't specify hashlist
            'noHash' : ['host/Info.txt'],
        },
        'rsvd' : {
            # replace this with the real archive when it exists
            'archives' : [],
            'files' : [('rsvd','EMPTY'),],
            'partition_size' : 0x300000,
        },

        'cust' : {
            # Location of archive(s) needed to build this section
            'archives' : ['%sbeRoot%/builddir/public/src/onetime/odyssey/cust/odyssey_cust_DD1.pak',
                          'defaults/cust.pak'],

            # 'files' is a list of essential archive entries (files). Intended to generate
            # place holders for content that may not yet exist in the sub-archives that
            # make up this section.
            # They are generated with zero data length if content file doesn't exist.
            # method is store (no compression)
            # (archiveName, content location), ...
            'files' : [('cust/image.hash','EMPTY'),],

            'partition_size' : 0x10000,
            # not signed - don't specify hashlist
            'noHash' : ['cust/Info.txt'],
        },
    },
}
